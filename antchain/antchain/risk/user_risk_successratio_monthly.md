---
title: "用户风控平台月度成功率SLO"
category: "成功率"
authors:
  - name: "天演"
reviewers:
  - name: "李丰"
  - name: "几悟"
  - name: "天既"
slo_id: "121300359"
baiyan_project_id: "252750"
source: 
  - title: ""
  - site: "local"
  - url: ""
dates: 
  - created_date: "2022-04-20T12:00:00.000Z"
  - updated_date: "2022-05-06T16:00:00.000Z"
  - next_review_date: "2022-xx-xx"
draft: false
weight: 10
---

## 1.服务定义
用户风控平台是智能科技商业化的产品，是一款基于大数据技术和机器学习技术的风险评分产品。本文档将定义用户风控平台可靠性的具体指标承诺。
## 2. SLI & SLO详细定义
### 2.1 用户风控平台月度成功率SLI:
风控咨询接口的成功率指标：根据接口返回状态码result_code判断请求是否成功，返回码为SERVICE_EXCEPTION代表请求失败。
### 2.2 用户风控平台月度成功率SLO:
SLO = 1 - 统计周期失败量 / 统计周期总量
### 2.3 计算标准: 
SLO计算范围为自然月，即统计每个月第一天的00:00:00到每个月最后一天的23:59:59。
### 2.4 推演逻辑:
用户风控平台是智能科技成熟的商业化产品，为了能明确服务等级标准、保障客户权益、提供有业界竞争力的可用性承诺，经售后、产品、研发等多个团队讨论后，希望实现99.9%成功率标准。
### 2.5 不在计算范畴之内:
以 [蚂蚁链用户风控平台服务等级协议](https://render.alipay.com/p/c/190x6kut70n4) 第4章节免责条款为准。
## 3.SLA(服务等级协议)
[蚂蚁链用户风控平台服务等级协议](https://render.alipay.com/p/c/190x6kut70n4)
### 3.1 故障等级
SLO不设故障等级定义，以GOC故障等级定义为准。
### 3.2 破线策略
当月度成功率SLO<SLO目标值时，发出SLO破线极光告警，触发应急流程：钉钉群发出极光告警->SRE快速响应极光告警->SRE和业务线owner组织相关人员进行定位和应急->SRE完成极光应急。

## 4.预警方案
### 4.1 错误消耗
根据历史总量预估出一个当前时间窗口中的错误量上限，当前时间窗口内的错误量如果超过这个上限，那么 SLO 就会有很大的可能会被打破，此时就会发出错误预算告警。
### 4.2 计算方式
错误预算告警计算规则：统计窗口内的错误量 - max(过去30天的总量 * (1 - SLO目标值) * 消耗速度, 最小预算)

示例：假如SLO目标值为0.999、过去30天的总量为100000、过去1小时的错误量为5、1小时能消耗错误量占过去30天错误量的比例为0.03，计算得到1小时的错误预算为3（100000 * (1 - 0.999) * 0.03），过去1小时的错误量5大于了1小时的错误预算3，将会触发告警。
## 5. 其他
